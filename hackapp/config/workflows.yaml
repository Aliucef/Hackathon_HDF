# HackApp Workflow Configurations
# Add new workflows here without changing any code

workflows:
  - workflow_id: voice_summary_icd10
    name: "Voice AI Clinical Summary with ICD-10"
    hotkey: "CTRL+ALT+V"
    enabled: true
    description: "Summarize clinical note and suggest ICD-10 diagnosis code"

    input:
      source: selected_text
      validation:
        min_length: 10
        max_length: 5000

    connector: voice_ai

    request:
      template: |
        {
          "text": "{{ input_text }}",
          "language": "en",
          "include_icd10": true
        }
      timeout: 30
      method: POST

    response:
      mappings:
        summary: $.summary
        icd10_code: $.icd10.code
        icd10_label: $.icd10.label
        confidence: $.confidence

    validation:
      required_fields:
        - summary
        - icd10_code
      icd10_format: true

    output:
      - type: text
        target_field: DiagnosisText
        content: "{{ summary }}"
        mode: replace
        navigation: null

      - type: icd10
        target_field: DiagnosisCode
        content: "{{ icd10_code }}"
        label: "{{ icd10_label }}"
        mode: replace
        navigation: tab_3

    security:
      allowed_fields:
        - DiagnosisText
        - DiagnosisCode
        - ClinicalNotes
      require_confirmation: false
      max_response_size: 100000

  # Example: Drug Interaction Checker (disabled for now)
  - workflow_id: drug_interaction_check
    name: "Drug Interaction Checker"
    hotkey: "CTRL+ALT+D"
    enabled: false
    description: "Check for drug interactions in medication list"

    input:
      source: selected_text
      validation:
        min_length: 3
        max_length: 1000

    connector: drug_checker

    request:
      template: |
        {
          "medications": "{{ input_text }}"
        }
      timeout: 20
      method: POST

    response:
      mappings:
        interactions: $.interactions
        severity: $.severity
        recommendations: $.recommendations

    validation:
      required_fields:
        - interactions

    output:
      - type: text
        target_field: ClinicalNotes
        content: "⚠️ Drug Interactions ({{ severity }}): {{ interactions }}"
        mode: append
        navigation: null

    security:
      allowed_fields:
        - ClinicalNotes
        - Warnings
      require_confirmation: true
