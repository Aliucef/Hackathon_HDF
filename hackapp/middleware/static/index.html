<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HackApp - Automation Dashboard</title>
    <style>
        :root{
            --bg: #d9e0ea;
            --panel: #e9eef6;
            --panel2: #eef3fb;
            --line: #9fb0c6;
            --line2:#b7c5d8;
            --tab: #cdd8e8;
            --tabActive: #5e7fb7;
            --tabText: #0c1f3a;
            --tabActiveText: #fff;
            --bar: #c5d2e5;
            --bar2:#b9c7dc;
            --title: #2f4d79;
            --shadow: rgba(0,0,0,.08);
            --accent: #2f72d6;
            --danger:#c74141;
            --ok:#2aa86c;
            --muted:#6b7a90;
            --font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        }

        *{ box-sizing:border-box; margin:0; padding:0; }

        body{
            font-family: var(--font);
            background: #f2f4f7;
            color: #17212b;
            min-height: 100vh;
            padding: 20px;
        }

        .app{
            max-width: 1250px;
            margin: 0 auto;
            background: var(--bg);
            border: 1px solid var(--line);
            box-shadow: 0 12px 28px var(--shadow);
            overflow: hidden;
        }

        .topbar{
            background: linear-gradient(#d7e0ee, #c4d1e6);
            border-bottom: 1px solid var(--line);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .topbar .left{
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .topbar .right{
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .pill{
            background: #f7f9fd;
            border: 1px solid var(--line2);
            padding: 4px 12px;
            border-radius: 3px;
            box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
            white-space: nowrap;
            font-size: 12px;
            display: inline-flex;
            gap: 6px;
            align-items: center;
        }

        .pill strong{
            color: #233b5e;
            font-weight: 700;
        }

        .logo{
            font-size: 20px;
            font-weight: 800;
            color: var(--title);
            letter-spacing: -0.5px;
        }

        .tabbar{
            background: linear-gradient(#d3dded,#c2cfe4);
            border-bottom: 1px solid var(--line);
            padding: 8px 12px;
            display: flex;
            gap: 8px;
            align-items: center;
            overflow-x: auto;
        }

        .tab{
            background: var(--tab);
            border: 1px solid var(--line2);
            padding: 6px 14px;
            border-radius: 3px 3px 0 0;
            color: var(--tabText);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
            box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
            transition: all 0.15s;
        }

        .tab.active{
            background: var(--tabActive);
            color: var(--tabActiveText);
            border-color: #4f6ea6;
            font-weight: 700;
        }

        .content{
            padding: 16px;
            background: var(--panel2);
            min-height: 500px;
        }

        .sectionHeader{
            background: linear-gradient(#cfd9ea,#b8c7de);
            border: 1px solid var(--line2);
            border-radius: 3px 3px 0 0;
            padding: 8px 12px;
            font-size: 13px;
            font-weight: 700;
            color: var(--title);
            margin-bottom: -1px;
        }

        .features{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 16px;
            margin-top: 0;
        }

        .feature-card{
            background: var(--panel);
            border: 1px solid var(--line2);
            box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .feature-card:hover{
            background: #f2f6fc;
            border-color: var(--accent);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .feature-header{
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 12px;
        }

        .feature-icon{
            width: 52px;
            height: 52px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            flex-shrink: 0;
            border: 1px solid var(--line2);
            box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
        }

        .feature-icon.excel{
            background: linear-gradient(135deg, #2aa86c, #23915c);
        }

        .feature-icon.coming{
            background: linear-gradient(135deg, #92a1b5, #7a8a9e);
        }

        .feature-title{
            font-size: 15px;
            font-weight: 700;
            color: var(--title);
            margin-bottom: 4px;
        }

        .feature-badge{
            display: inline-block;
            padding: 2px 8px;
            border-radius: 2px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 1px solid;
        }

        .badge-active{
            background: #e8f5f0;
            border-color: #7dc4a5;
            color: #1e7045;
        }

        .badge-coming{
            background: #ececf0;
            border-color: #b8c1ce;
            color: var(--muted);
        }

        .feature-description{
            font-size: 12px;
            line-height: 1.5;
            color: #3d4f66;
            margin-bottom: 14px;
        }

        .feature-footer{
            margin-top: 14px;
            padding-top: 12px;
            border-top: 1px solid var(--line2);
            font-size: 11px;
            color: var(--muted);
        }

        .stats{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 14px;
            margin-bottom: 24px;
        }

        .stat-card{
            background: #f7f9fd;
            border: 1px solid var(--line2);
            border-radius: 3px;
            padding: 16px;
            box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
        }

        .stat-label{
            font-size: 11px;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .stat-value{
            font-size: 24px;
            font-weight: 800;
            color: var(--title);
        }

        .stat-detail{
            font-size: 11px;
            color: var(--muted);
            margin-top: 4px;
        }

        .statusbar{
            height: 28px;
            background: linear-gradient(#d7e0ee,#c4d1e6);
            border-top: 1px solid var(--line);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            font-size: 11px;
            color: #2c3f5d;
        }

        .disabled-overlay{
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(217, 224, 234, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .feature-card.disabled:hover .disabled-overlay{
            opacity: 1;
        }

        .feature-card.disabled{
            cursor: not-allowed;
            opacity: 0.7;
        }

        @media (max-width: 768px){
            .features{ grid-template-columns: 1fr; }
            .stats{ grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="app">
    <!-- TOP BAR -->
    <div class="topbar">
        <div class="left">
            <div class="logo">Clinical Assistant</div>
            <div class="pill">
                <strong>Hospital:</strong>
                <span>H√¥tel Dieu de France</span>
            </div>
            <div class="pill">
                <strong>Version:</strong>
                <span>1.0</span>
            </div>
        </div>

        <div class="right">
            <div class="pill">
                <strong>System:</strong>
                <span style="color: var(--ok);">‚óè</span> Ready
            </div>
        </div>
    </div>

    <!-- TABS -->
    <div class="tabbar">
        <div class="tab active">Home</div>
        <div class="tab" onclick="openFeature('excel')">Patient Data Lookup</div>
        <div class="tab">External Systems</div>
        <div class="tab">Reports</div>
        <div class="tab">Settings</div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="content">
        <!-- Stats Section -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-label">Active Tools</div>
                <div class="stat-value" id="activeFeatures">2</div>
                <div class="stat-detail">Ready to use</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Workflows Configured</div>
                <div class="stat-value" id="workflowsCount">0</div>
                <div class="stat-detail">Automated processes</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Smart Formatting</div>
                <div class="stat-value">Enabled</div>
                <div class="stat-detail">AI-powered assistance</div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="sectionHeader">
            Available Clinical Tools
        </div>

        <div class="features">
            <!-- Excel Automation -->
            <div class="feature-card" onclick="openFeature('excel')">
                <div class="feature-header">
                    <div class="feature-icon excel">üìä</div>
                    <div style="flex: 1;">
                        <div class="feature-title">Patient Data Lookup</div>
                        <span class="feature-badge badge-active">Available</span>
                    </div>
                </div>

                <p class="feature-description">
                    Automatically retrieve patient information from Excel files and populate DXCare fields.
                    Simply press a keyboard shortcut, and the system will read the patient ID, find the data,
                    and fill in the appropriate fields for you.
                </p>

                <div class="feature-footer">
                    Fast ‚Ä¢ Accurate ‚Ä¢ Keyboard shortcuts ‚Ä¢ Multiple fields supported
                </div>
            </div>

            <!-- Voice Recording -->
            <div class="feature-card" onclick="openFeature('voice')">
                <div class="feature-header">
                    <div class="feature-icon excel">üé§</div>
                    <div style="flex: 1;">
                        <div class="feature-title">Voice Recording</div>
                        <span class="feature-badge badge-active">Available</span>
                    </div>
                </div>

                <p class="feature-description">
                    Record clinical conversations with a simple hotkey. Press once to start recording,
                    press again to stop. The system transcribes your voice and fills in multiple fields
                    automatically using AI formatting.
                </p>

                <div class="feature-footer">
                    Hands-free ‚Ä¢ Voice-to-text ‚Ä¢ AI formatting ‚Ä¢ Multiple fields
                </div>
            </div>

            <!-- API Integration (Coming Soon) -->
            <div class="feature-card disabled">
                <div class="feature-header">
                    <div class="feature-icon coming">üåê</div>
                    <div style="flex: 1;">
                        <div class="feature-title">External Database Access</div>
                        <span class="feature-badge badge-coming">Coming Soon</span>
                    </div>
                </div>

                <p class="feature-description">
                    Connect to external medical databases and retrieve patient records in real-time.
                    Secure connections ensure patient data remains protected while providing instant access
                    to the information you need.
                </p>

                <div class="feature-footer">
                    Secure ‚Ä¢ Real-time ‚Ä¢ Reliable ‚Ä¢ Multi-source support
                </div>

                <div class="disabled-overlay">
                    <div style="text-align:center;">
                        <div style="font-size:42px; margin-bottom:6px;">üöß</div>
                        <div style="font-weight:700; color: var(--muted);">Coming Soon</div>
                    </div>
                </div>
            </div>

            <!-- Database Lookup (Coming Soon) -->
            <div class="feature-card disabled">
                <div class="feature-header">
                    <div class="feature-icon coming">üóÑÔ∏è</div>
                    <div style="flex: 1;">
                        <div class="feature-title">Advanced Reports</div>
                        <span class="feature-badge badge-coming">Coming Soon</span>
                    </div>
                </div>

                <p class="feature-description">
                    Generate comprehensive patient reports with a single click. Access historical data,
                    lab results, and clinical notes organized in an easy-to-read format for quick
                    decision making.
                </p>

                <div class="feature-footer">
                    Quick access ‚Ä¢ Organized data ‚Ä¢ Historical records ‚Ä¢ Custom formats
                </div>

                <div class="disabled-overlay">
                    <div style="text-align:center;">
                        <div style="font-size:42px; margin-bottom:6px;">üöß</div>
                        <div style="font-weight:700; color: var(--muted);">Coming Soon</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- STATUS BAR -->
    <div class="statusbar">
        <div class="left">
            <span>Clinical Assistant v1.0</span>
            <span style="margin-left: 12px;">‚Ä¢</span>
            <span style="margin-left: 12px;">Ready to assist with your clinical workflow</span>
        </div>
        <div class="right" id="currentTime">Loading...</div>
    </div>
</div>

<script>
// API Configuration
const API_URL = 'http://localhost:5000';
const AUTH_TOKEN = 'Bearer hackathon_demo_token';

// Update time in status bar
function updateTime() {
    const now = new Date();
    const options = {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    };
    const timeString = now.toLocaleDateString('en-US', options);
    document.getElementById('currentTime').textContent = timeString;
}

// Load statistics from API
async function loadStats() {
    try {
        // Get health status
        const response = await fetch(`${API_URL}/api/health`);
        if (response.ok) {
            const data = await response.json();
            if (data.workflows_loaded) {
                document.getElementById('workflowsCount').textContent = data.workflows_loaded;
            }
        }

        // Get visual workflows count
        const vwResponse = await fetch(`${API_URL}/api/visual-workflows`, {
            headers: { 'Authorization': AUTH_TOKEN }
        });
        if (vwResponse.ok) {
            const vwData = await vwResponse.json();
            if (vwData.total) {
                document.getElementById('workflowsCount').textContent = vwData.total;
            }
        }
    } catch (error) {
        console.error('Failed to load stats:', error);
    }
}

// Navigate to feature
function openFeature(feature) {
    if (feature === 'excel') {
        window.location.href = '/excel';
    } else if (feature === 'voice') {
        window.location.href = '/voice';
    }
}

// Initialize on page load
updateTime();
setInterval(updateTime, 1000);
loadStats();
</script>

</body>
</html>
